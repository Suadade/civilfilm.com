---
const siteTitle = "Civil Film";
---

<head>
  <meta charset="utf-8" />
  <title>{siteTitle}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts (FIX: removed stray quote, added display=swap) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Shrikhand&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
  />

<header class="sticky-brand">
  <img src="/logo/civilfilm-logo-transp.png" alt="Civil Film" />
  <div class="brand-text"></div>
</header>

</head>

<!-- HERO VIDEO (was class="hero" before; now separated to avoid CSS conflicts) -->
<section class="hero-video">
  <video class="video video-desktop" autoplay muted loop playsinline>
    <source src="/video/hero-desktop.mp4" type="video/mp4" />
  </video>

  <video class="video video-mobile" autoplay muted loop playsinline>
    <source src="/video/hero-mobile.mp4" type="video/mp4" />
  </video>

  <!-- Text box bottom-left on video -->
  <div class="hero-box">
    <p class="hero-text">
      We collect
      <span class="move voices">your participants' voices</span>,
      making your projects
      <span class="move impact">gain momentum and impact further</span>.
    </p>
  </div>

<div class="ghost-layer">
  <span class="ghost voices"></span>
  <span class="ghost impact"></span>
</div>

</section>

<!-- WELCOME SECTION (was also class="hero" before; now separated) -->
<section class="hero-intro">
  <h1>Welcome to Civil Film</h1>

  <p>
    Civil Film is a film production company dedicated to amplifying voices from
    civil society. We work with stories that are often unheard, overlooked, or
    simplified — and give them the space, time, and care they deserve.
  </p>

  <p>
    Our work is rooted in the belief that storytelling can bridge experiences,
    challenge assumptions, and create deeper understanding between people.
    Through documentary film and visual storytelling, we collaborate closely
    with communities, organizations, and individuals to tell stories from within,
    not about.
  </p>

  <p>
    We don’t aim to speak for others. We aim to listen — and to create films that
    reflect the complexity, dignity, and lived realities of the people involved.
  </p>
</section>

<!-- TESTIMONIES -->
<section class="section">
  <h2>Stories & Testimonies</h2>
  <div class="videos">
    <iframe
      src="https://www.youtube.com/embed/ELq8KLaf5hg"
      title="Testimony 1"
      allowfullscreen
    ></iframe>

    <iframe
      src="https://www.youtube.com/embed/MZhjid7YO6c"
      title="Testimony 2"
      allowfullscreen
    ></iframe>

    <iframe
      src="https://www.youtube.com/embed/T8Ayl6_zRDY"
      title="Testimony 3"
      allowfullscreen
    ></iframe>
  </div>
</section>

<!-- CONTACT -->
<footer class="footer">
  <div class="section">
    <h2>Contact</h2>
    <p>Email: erikhansson@civilfilm.com</p>
    <p>Based in: Sweden, but ready for work worldwide.</p>
    <p><!-- Instagram / Vimeo / LinkedIn --></p>
  </div>
</footer>

<style>
  /* Reset (kept minimal + safe) */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }
  * {
    margin: 0;
  }
  html,
  body {
    height: 100%;
  }
  body {
    font-family: "Raleway", system-ui, -apple-system, BlinkMacSystemFont,
      "Segoe UI", Helvetica, Arial, sans-serif;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    color: #111;
    background: #fff;
  }
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  /* Shared layout */
  .section {
    max-width: 980px;
    margin: 0 auto;
    padding: 4rem 1.5rem;
  }

  h1,
  h2 {
    font-family: "Shrikhand", Georgia, serif;
    font-weight: 400;
    line-height: 1.15;
  }

  /* HERO VIDEO */
  .hero-video {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    background: #000;
  }

  .video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .video-mobile {
    display: none;
  }

  @media (max-width: 768px) {
    .video-desktop {
      display: none;
    }
    .video-mobile {
      display: block;
    }
  }

  /* Logo on video */
.hero-logo {
  position: sticky;
  top: 2rem;
  left: 2rem;
  z-index: 10;
  align-self: flex-start;
}
  .hero-logo img {
    height: 140px;
    width: auto;
    opacity: 0.95;
  }
  @media (max-width: 768px) {
    .hero-logo {
      top: 1.25rem;
      left: 1.25rem;
    }
    .hero-logo img {
      height: 56px;
    }
  }

  /* Text box on video */
  .hero-box {
    position: absolute;
    bottom: 2rem;
    left: 2rem;
    max-width: 520px;
    padding: 1.25rem 1.5rem;
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(2px);
    border-radius: 12px;
    color: #fff;
    z-index: 2;
  }
  .hero-text {
    font-size: 1rem;
    line-height: 1.5;
  }
  .hero-text .move {
    display: inline-block;
    will-change: transform, opacity;
  }

  /* WELCOME SECTION */
  .hero-intro {
    max-width: 980px;
    margin: 0 auto;
    padding: 5rem 1.5rem;
    background: #f4f2ef;
  }
  .hero-intro h1 {
    font-size: clamp(2.2rem, 4vw, 3.2rem);
    margin-bottom: 1.5rem;
  }
  .hero-intro p {
    font-size: 1.1rem;
    max-width: 760px;
    margin-bottom: 1.25rem;
  }

  /* TESTIMONIES */
  .section h2 {
    font-size: 2.2rem;
    margin-bottom: 2rem;
  }
  .videos {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }
  iframe {
    width: 100%;
    aspect-ratio: 16 / 9;
    border: none;
    border-radius: 12px;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
  }

  /* FOOTER */
  .footer {
    background: #111;
    color: #eaeaea;
  }
  .footer h2 {
    color: #fff;
  }
  .footer p {
    color: #d0d0d0;
    margin: 0.5rem 0;
  }

.sticky-brand {
  position: fixed;
  top: 2rem;
  left: 2rem;
  z-index: 999;
  pointer-events: none;
  transform-origin: top left;

  display: flex;
  align-items: center;
  gap: 1rem;
}


.sticky-brand img {
  height: 140px;
  width: auto;
  display: block;
  opacity: 0.95;
}

.brand-text {
  position: relative;
  margin-left: 1rem;
  font-family: "Shrikhand", Georgia, serif;
  font-size: 0.95rem;
  letter-spacing: 0.02em;
  white-space: nowrap;

  opacity: 0;          /* ALLTID osynlig */
  pointer-events: none;
}


.ghost-layer {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 998;
}

.ghost {
  position: absolute;
  font-family: "Shrikhand", Georgia, serif;
  font-size: 0.95rem;
  letter-spacing: 0.02em;
  white-space: nowrap;
  color: #111;
  opacity: 0;
  will-change: transform, opacity;
}



</style>

<script is:inline>
  const hero = document.querySelector(".hero-video");
  const brand = document.querySelector(".sticky-brand");
  const brandText = document.querySelector(".brand-text");

  const sourceVoices = document.querySelector(".hero-text .voices");
  const sourceImpact = document.querySelector(".hero-text .impact");

  const ghostVoices = document.querySelector(".ghost.voices");
  const ghostImpact = document.querySelector(".ghost.impact");

  const voiceText = "Your participants' voices";
  const impactText = "impact further";

  ghostVoices.textContent = voiceText;
  ghostImpact.textContent = impactText;

  function clamp(n, min, max) {
    return Math.min(Math.max(n, min), max);
  }

  function lerp(a, b, t) {
    return a + (b - a) * t;
  }

  let ghostProgress = 0; // 0 → 1, rör sig långsamt

  function update() {
    if (!hero) return;

    const heroTop = hero.offsetTop;
    const heroHeight = hero.offsetHeight;
    const scrollY = window.scrollY;

    const progress = clamp((scrollY - heroTop) / heroHeight, 0, 1);

    /* --- LOGO SCALE --- */
    const scale = 1 - progress * 0.5;
    brand.style.transform = `scale(${scale})`;

    /* --- GHOST WORDS --- */
    const start = 0.8;
    const end = 1.0;

const targetT = clamp((progress - start) / (end - start), 0, 1);

// slow-follow: spökena hinner ikapp istället för att stressas
ghostProgress += (targetT - ghostProgress) * 0.08;
const t = ghostProgress;

    if (t > 0) {
      const srcV = sourceVoices.getBoundingClientRect();
      const srcI = sourceImpact.getBoundingClientRect();
      const target = brandText.getBoundingClientRect();

      ghostVoices.style.opacity = t;
      ghostImpact.style.opacity = t;

      const vX = lerp(srcV.left, target.left, t);
      const vY = lerp(srcV.top, target.top, t);

      const iX = lerp(srcI.left, target.left + ghostVoices.offsetWidth + 8, t);
      const iY = lerp(srcI.top, target.top, t);

      ghostVoices.style.transform = `translate(${vX}px, ${vY}px)`;
      ghostImpact.style.transform = `translate(${iX}px, ${iY}px)`;

    } else {
      ghostVoices.style.opacity = 0;
      ghostImpact.style.opacity = 0;
    }

  }

  window.addEventListener("scroll", update, { passive: true });
  window.addEventListener("resize", update);
  update();
</script>
