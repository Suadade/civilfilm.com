---
const siteTitle = "Civilfilm - Your participants' voices impact further";
---

<head>
<link rel="icon" type="image/png" href="/favicon.png" />
  <meta charset="utf-8" />
  <title>{siteTitle}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts (FIX: removed stray quote, added display=swap) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Shrikhand&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
  />
</head>

<header class="sticky-brand">
  <img src="/logo/civilfilm-logo-transp.png" alt="Civil Film" />
  <div class="brand-text" aria-hidden="true">
    <span class="bt-voices"></span>
    <span class="bt-impact"></span>
  </div>
</header>

<div class="lang-switch">
  <label class="sr-only" for="lang">Language</label>
  <select id="lang" name="lang" onchange="location = this.value;">
    <option value="/en/">English</option>
    <option value="/sv/" selected>Svenska</option>
  </select>
</div>

<!-- HERO VIDEO (was class="hero" before; now separated to avoid CSS conflicts) -->
<section class="hero-video">
  <video class="video video-desktop" autoplay muted loop playsinline>
    <source src="/video/hero-desktop.mp4" type="video/mp4" />
  </video>

  <video class="video video-mobile" autoplay muted loop playsinline>
    <source src="/video/hero-mobile.mp4" type="video/mp4" />
  </video>

  <!-- Text box bottom-left on video -->
  <div class="hero-box">
    <p class="hero-text">
      Vi samlar in
      <span class="move voices">era deltagares röster</span>,
      så att era projekt
      <span class="move impact">skapar momentum och ytterligare påverkan</span>
    </p>
  </div>

<div class="ghost-layer">
  <span class="ghost voices"></span>
  <span class="ghost impact"></span>
</div>

</section>

<div class="bg-fixed" aria-hidden="true"></div>

<div class="below-video-bg">
<!-- WELCOME SECTION (was also class="hero" before; now separated) -->
<section class="hero-intro">
  <h1>Välkommen till Civilfilm</h1>

  <p>
    Civilfilm är ett filmproduktionsbolag som arbetar för att förstärka röster från
    civilsamhället. Vi jobbar med berättelser som ofta är ohörda, förbisedda eller
    förenklade — och ger dem den tid, omsorg och det utrymme de förtjänar.
  </p>

  <p>
    Vårt arbete bygger på övertygelsen att berättande kan överbrygga erfarenheter,
    utmana antaganden och skapa djupare förståelse mellan människor. Genom dokumentärfilm
    och visuellt berättande samarbetar vi nära communities, organisationer och individer
    för att berätta historier inifrån — inte om.
  </p>

  <p>
    Vi vill inte tala för andra. Vi vill lyssna — och skapa film som speglar komplexiteten,
    värdigheten och de levda verkligheter som människorna bär med sig.
  </p>
</section>

<!-- TESTIMONIES -->
<section class="section">
  <h2>Berättelser</h2>
  <div class="videos">
    <iframe
      src="https://www.youtube.com/embed/ELq8KLaf5hg"
      title="Testimony 1"
      allowfullscreen
    ></iframe>

    <iframe
      src="https://www.youtube.com/embed/MZhjid7YO6c"
      title="Testimony 2"
      allowfullscreen
    ></iframe>

    <iframe
      src="https://www.youtube.com/embed/T8Ayl6_zRDY"
      title="Testimony 3"
      allowfullscreen
    ></iframe>
  </div>
</section>
  

  <section class="section contact-split">
  <div class="contact-grid">
    <div class="contact-image">
      <img src="/logo/pic-erik-sacha.jpg" alt="Civilfilm contact" />
    </div>

    <div class="contact-copy">
      <h2>Kontakt</h2>

      <p>
        Att förena antropologi och film är Civilfilms grundrecept. 
        Genom att ställa rätt frågor i ögonblicket av upplevelserna skapas 
        energiska och levande svar – sådana som ger kraft och riktning åt ditt projekt.
      </p>

      <p>
        <strong>Kontakta mig på</strong>
        <a href="mailto:erikhansson@civilfilm.com">erikhansson@civilfilm.com</a>
      </p>

      <p>
        <strong>Baserad i</strong> Sverige, med ett globalt arbetsperspektiv.
      </p>
    </div>
  </div>
</section>
</div>

<style>

  /* Reset (kept minimal + safe) */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }
  * {
    margin: 0;
  }
  html,
  body {
    height: 100%;
  }
  body {
    font-family: "Raleway", system-ui, -apple-system, BlinkMacSystemFont,
      "Segoe UI", Helvetica, Arial, sans-serif;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    color: #111;
    background: #fff;
  }
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  /* Shared layout */
  .section {
    max-width: 980px;
    margin: 0 auto;
    padding: 4rem 1.5rem;
  }

  h1,
  h2 {
    font-family: "Shrikhand", Georgia, serif;
    font-weight: 400;
    line-height: 1.15;
  }

  .lang-switch {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 2000;
}

.lang-switch select {
  font: inherit;
  padding: 0.4rem 0.6rem;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,0.25);
  background: rgba(255,255,255,0.75);
  backdrop-filter: blur(8px);
}

/* screen-reader only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  white-space: nowrap;
  border: 0;
}

  /* HERO VIDEO */
  .hero-video {
    position: relative;
    z-index: 5; /* ensures video stays on top */
    width: 100%;
    height: 100vh;
    overflow: hidden;
    background: #000;
  }

  .video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .video-mobile {
    display: none;
  }

  @media (max-width: 768px) {
    .video-desktop {
      display: none;
    }
    .video-mobile {
      display: block;
    }
  }

  /* Logo on video */
.hero-logo {
  position: sticky;
  top: 2rem;
  left: 2rem;
  z-index: 10;
  align-self: flex-start;
}
  .hero-logo img {
    height: 140px;
    width: auto;
    opacity: 0.95;
  }
  @media (max-width: 768px) {
    .hero-logo {
      top: 1.25rem;
      left: 1.25rem;
    }
    .hero-logo img {
      height: 56px;
    }
  }

  /* Text box on video */
  .hero-box {
    position: absolute;
    bottom: 2rem;
    left: 2rem;
    max-width: 520px;
    padding: 1.25rem 1.5rem;
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(2px);
    border-radius: 12px;
    color: #fff;
    z-index: 2;
  }

@media (max-width: 768px) {
  .hero-box {
    left: 1rem;              /* closer to edge */
    right: 1rem;             /* allow it to breathe symmetrically */
    bottom: 1rem;

    max-width: none;         /* full available width */
    padding: 0.9rem 1rem;    /* tighter padding */

    border-radius: 10px;     /* slightly softer */
  }
}


  .hero-text {
    font-size: 1rem;
    line-height: 1.5;
    font-weight: bold;
  }
  .hero-text .move {
    display: inline-block;
    will-change: transform, opacity;
  }

  /* WELCOME SECTION */

.below-video-bg {
  background-image: url("/logo/welcome-background.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed; /* optional: nice on desktop */
  min-height: calc(100vh - 72px); /* optional: ensure presence */
}

@media (min-width: 769px) {
  .below-video-bg { background-attachment: fixed; }
}

/* Make text readable on top of the image */
.below-video-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

/* Ensure content sits above overlay */
.below-video-bg > * {
  position: relative;
  z-index: 1;
}

@media (max-width: 768px) {
  .below-video-bg {
    /*background-image: url("/logo/welcome-background-mob-crop3.jpg");*/
    background-attachment: sticky; /* VERY important */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }
}

/* Fixed background layer (works on iOS) */
.bg-fixed {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;

  /*background-image: url("/logo/welcome-background.jpg");*/
      background-color: coral;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  transform: translateZ(0); /* helps iOS */
}

/* Your content area becomes transparent, but above the bg */
.below-video-bg {
  position: relative;
  z-index: 1;
  background: transparent;
}

/* Mobile can use a different crop if you want */
@media (max-width: 768px) {
  .bg-fixed {
    /*background-image: url("/logo/welcome-background-mob-crop.jpg");*/
    background-color: coral;
    background-position: center 20%;
  }
}

  .hero-intro {
    max-width: 980px;
    margin: 0 auto;
    padding: 5rem 1.5rem;
  }
  .hero-intro h1 {
    font-size: clamp(2.2rem, 4vw, 3.2rem);
    margin-bottom: 1.5rem;
  }
  .hero-intro p {
    font-size: 1.1rem;
    max-width: 760px;
    margin-bottom: 1.25rem;
      font-weight: bold;
  }

  /* TESTIMONIES */
  .section h2 {
    font-size: 2.2rem;
    margin-bottom: 2rem;
  }
  .videos {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }
  iframe {
    width: 100%;
    aspect-ratio: 16 / 9;
    border: none;
    border-radius: 12px;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
  }

  .contact-grid {
  display: grid;
  grid-template-columns: 1fr 1.2fr;
  gap: 2rem;
  align-items: center;
}

.contact-image img {
  width: 100%;
  height: auto;
  border-radius: 14px;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
}

.contact-copy h2 {
  margin-bottom: 1rem;
}

.contact-copy p {
  font-size: 1.1rem;
  max-width: 60ch;
  margin-bottom: 1rem;
    font-weight: bold;
}

.contact-copy a {
  color: inherit;
  text-decoration: underline;
}

@media (max-width: 768px) {
  .contact-grid {
    grid-template-columns: 1fr;
  }

  .contact-copy p {
    font-size: 1rem;
  }
}


.sticky-brand {
  position: fixed;
  top: 2rem;
  left: 2rem;
  z-index: 999;
  pointer-events: none;
  transform-origin: top left;

  display: flex;
  align-items: center;
  gap: 1rem;
}

.sticky-brand img {
  height: 140px;
  width: auto;
  display: block;
  opacity: 0.95;
}

/* =========================
   MOBILE: logo right, text left (HARD separation)
   ========================= */
@media (max-width: 768px) {
  .sticky-brand {
    top: 1.25rem;
    right: 1.25rem;
    left: auto;

    display: flex;
    align-items: flex-start;
    gap: 0; /* we control spacing manually */

    transform-origin: top right;

    /* IMPORTANT: reserve space for text */
    padding-left: 7.5rem;
  }

  /* TEXT: explicitly positioned LEFT */
  .brand-text {
    position: absolute;
    right: 4.6rem;     /* pushes target further left of logo */
    top: 20rem;

    width: max-content;
    max-width: 52vw;   /* prevents landing under logo */

    text-align: right;
    align-items: flex-end;

    pointer-events: none;
  }

  /* LOGO */
  .sticky-brand img {
    height: 100px;
    width: auto;
    flex-shrink: 0;
  }
}


.brand-text {
  display: flex;
  flex-direction: column;
  gap: 0.15rem;
  opacity: 0;           /* invisible anchor */
  pointer-events: none;
  font-family: "Shrikhand", Georgia, serif;
  letter-spacing: 0.02em;
}

.brand-text span {
  display: block;
  white-space: nowrap;
}

/* Desktop sizes */
@media (min-width: 769px) {
  .brand-text,
  .ghost {
    font-size: 3.15rem;
    line-height: 0.85;
  }
}

/* Mobile sizes */
@media (max-width: 768px) {
  .brand-text,
  .ghost {
    font-size: 0.9rem;
    line-height: 1.2;
  }
}



.ghost-layer {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 998;
}

.ghost {
  position: absolute;
  font-family: "Shrikhand", Georgia, serif;
  font-size: 0.95rem;
  letter-spacing: 0.02em;
  white-space: nowrap;
  color: #111;
  opacity: 0;
  will-change: transform, opacity;
}

@media (max-width: 768px) {
  .ghost-layer { z-index: 9999 !important; }
  .sticky-brand { z-index: 9990 !important; }
}


</style>

<script is:inline>
  const hero = document.querySelector(".hero-video");
  const brand = document.querySelector(".sticky-brand");

  const brandText = document.querySelector(".brand-text");
  const targetVoices = document.querySelector(".bt-voices");
  const targetImpact = document.querySelector(".bt-impact");

  const sourceVoices = document.querySelector(".hero-text .voices");
  const sourceImpact = document.querySelector(".hero-text .impact");

  const ghostVoices = document.querySelector(".ghost.voices");
  const ghostImpact = document.querySelector(".ghost.impact");

  const voiceText = "Your participants' voices";
  const impactText = "impact further";

  const brandImg = document.querySelector(".sticky-brand img");

  // Fill the invisible target lines (anchors)
  if (targetVoices) targetVoices.textContent = voiceText;
  if (targetImpact) targetImpact.textContent = impactText;

  // Fill the moving ghosts
  if (ghostVoices) ghostVoices.textContent = voiceText;
  if (ghostImpact) ghostImpact.textContent = impactText;

  function clamp(n, min, max) {
    return Math.min(Math.max(n, min), max);
  }

  function lerp(a, b, t) {
    return a + (b - a) * t;
  }

  let ghostProgress = 0;

  function update() {
    if (!hero || !brand || !brandText || !targetVoices || !targetImpact || !sourceVoices || !sourceImpact || !ghostVoices || !ghostImpact) return;

    const heroTop = hero.offsetTop;
    const heroHeight = hero.offsetHeight;
    const scrollY = window.scrollY;

    const progress = clamp((scrollY - heroTop) / heroHeight, 0, 1);

    // Logo scale
    const scale = 1 - progress * 0.5;
    brand.style.transform = `scale(${scale})`;

    // Ghost timing
    const start = 0.8;
    const end = 1.0;
    const targetT = clamp((progress - start) / (end - start), 0, 1);

    // Smooth follow (slower = more cinematic)
    ghostProgress += (targetT - ghostProgress) * 0.08;
    const t = ghostProgress;

    if (t <= 0.001) {
      ghostVoices.style.opacity = 0;
      ghostImpact.style.opacity = 0;
      return;
    }

    const srcV = sourceVoices.getBoundingClientRect();
    const srcI = sourceImpact.getBoundingClientRect();

let tgtV, tgtI;

const isMobile = window.matchMedia("(max-width: 768px)").matches;

if (isMobile && brandImg) {
  // Land LEFT of the logo, aligned to its top
  const img = brandImg.getBoundingClientRect();

  // Measure ghost widths so we can right-align them nicely
  const vW = ghostVoices.offsetWidth || 120;
  const iW = ghostImpact.offsetWidth || 120;

  const gap = 10; // space between text and logo
  const xRightEdge = img.left - gap; // text ends here (left of logo)

  // Use the font-size as "line height"
  const fontSize = parseFloat(getComputedStyle(ghostVoices).fontSize) || 14;
  const line = fontSize * 1.15;

  tgtV = { left: xRightEdge - vW, top: img.top };
  tgtI = { left: xRightEdge - iW, top: img.top + line };
} else {
  // Desktop: use the invisible anchors (your current approach)
  tgtV = targetVoices.getBoundingClientRect();
  tgtI = targetImpact.getBoundingClientRect();
}

    ghostVoices.style.opacity = t;
    ghostImpact.style.opacity = t;

    const vX = lerp(srcV.left, tgtV.left, t);
    const vY = lerp(srcV.top, tgtV.top, t);

    const iX = lerp(srcI.left, tgtI.left, t);
    const iY = lerp(srcI.top, tgtI.top, t);

    ghostVoices.style.transform = `translate(${vX}px, ${vY}px)`;
    ghostImpact.style.transform = `translate(${iX}px, ${iY}px)`;
  }

  window.addEventListener("scroll", update, { passive: true });
  window.addEventListener("resize", update);
  update();
</script>
